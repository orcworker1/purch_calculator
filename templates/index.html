{% extends "base.html" %}
{% load django_bootstrap5 %}

{% block content %}

<style>
  .hero-section {
    background: linear-gradient(135deg, rgba(45, 134, 89, 0.1) 0%, rgba(232, 245, 233, 0.3) 100%);
    border-radius: 16px;
    padding: 3rem 2rem;
    margin-bottom: 3rem;
    text-align: center;
  }

  .section-title {
    color: var(--primary-dark);
    font-weight: 700;
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    letter-spacing: -1px;
  }

  .section-subtitle {
    color: var(--secondary-color);
    font-size: 1.1rem;
    font-weight: 400;
  }

  .card-action {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    background: rgba(248, 249, 250, 0.8);
  }

  .stats-card {
    background: white;
    border-left: 4px solid var(--primary-color);
  }

  .icon-badge {
    font-size: 1.5rem;
    margin-right: 0.5rem;
  }

  .orange-town {
     background-color: #fd7e147e

  }
</style>

<div class="hero-section">
  <h1 class="section-title">
    üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∑–∞–∫—É–ø–∫–∏ –º–∞—Å–ª–∏—á–Ω—ã—Ö
  </h1>
  <p class="section-subtitle">
    –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–∞—Ä—Ç–∏–π –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫–∞ –∏ —Ä–∞–ø—Å–∞ —Å —É—á–µ—Ç–æ–º –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ç–∞—Ä–∏—Ñ–æ–≤
  </p>
</div>

  <div class="row g-4">
    <div class="col-md-6">
      <div class="card shadow-sm h-100 border-success">
        <div class="card-header bg-success bg-opacity-25 text-center fw-semibold">
          –ü–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫
        </div>
        <div class="card-body p-0">
          {% if sunflower %}
          <table class="table table-striped table-bordered mb-0">
            <thead class="table-light">
              <tr class="text-center">
                <th>–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
                <th>–ë–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, %</th>
                <th>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—ä—ë–º–∞, —Ä—É–±/1%</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–æ—Å—Ç—å</th>
                <td>{{ sunflower.oil_content_base }}</td>
                <td>{{ sunflower.oil_content_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–°–æ—Ä–Ω–æ—Å—Ç—å</th>
                <td>{{ sunflower.weed_impurity_base }}</td>
                <td>{{ sunflower.weed_impurity_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–ü—Ä–æ—Ç–µ–∏–Ω</th>
                <td>{{ sunflower.protein_base }}</td>
                <td>{{ sunflower.protein_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–∞—è –ø—Ä–∏–º–µ—Å—å</th>
                <td>{{ sunflower.oil_impurity_base }}</td>
                <td>{{ sunflower.oil_impurity_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–ö–ß–ú</th>
                <td>{{ sunflower.KCHM_base }}</td>
                <td>{{ sunflower.KCHM_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–í–ª–∞–∂–Ω–æ—Å—Ç—å</th>
                <td>{{ sunflower.moisture_base }}</td>
                <td>{{ sunflower.moisture_removal }}</td>
              </tr>
            </tbody>
          </table>
          {% else %}
          <div class="p-4 text-center text-muted">
            –î–∞–Ω–Ω—ã–µ –ø–æ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫—É –ø–æ–∫–∞ –Ω–µ –∑–∞–¥–∞–Ω—ã.
          </div>
          {% endif %}
        </div>
        <div class="card-footer bg-white card-action">
          <span class="text-muted small">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–∏–∫–∞</span>
          <a href="{% url 'update_sunflower' %}" class="btn btn-success btn-sm">–ò–∑–º–µ–Ω–∏—Ç—å</a>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card shadow-sm h-100 border-warning">
        <div class="card-header bg-warning bg-opacity-25 text-center fw-semibold">
          –†–∞–ø—Å
        </div>
        <div class="card-body p-0">
          {% if raps %}
          <table class="table table-striped table-bordered mb-0">
            <thead class="table-light">
              <tr class="text-center">
                <th>–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
                <th>–ë–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, %</th>
                <th>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Å—ä—ë–º–∞, —Ä—É–±/1%</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–æ—Å—Ç—å</th>
                <td>{{ raps.oil_content_base }}</td>
                <td>{{ raps.oil_content_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–°–æ—Ä–Ω–æ—Å—Ç—å</th>
                <td>{{ raps.weed_impurity_base }}</td>
                <td>{{ raps.weed_impurity_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–ü—Ä–æ—Ç–µ–∏–Ω</th>
                <td>{{ raps.protein_base }}</td>
                <td>{{ raps.protein_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–∞—è –ø—Ä–∏–º–µ—Å—å</th>
                <td>{{ raps.oil_impurity_base }}</td>
                <td>{{ raps.oil_impurity_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–ö–ß–ú</th>
                <td>{{ raps.KCHM_base }}</td>
                <td>{{ raps.KCHM_removal }}</td>
              </tr>
              <tr>
                <th scope="row" class="text-start">–í–ª–∞–∂–Ω–æ—Å—Ç—å</th>
                <td>{{ raps.moisture_base }}</td>
                <td>{{ raps.moisture_removal }}</td>
              </tr>
            </tbody>
          </table>
          {% else %}
          <div class="p-4 text-center text-muted">
            –î–∞–Ω–Ω—ã–µ –ø–æ —Ä–∞–ø—Å—É –ø–æ–∫–∞ –Ω–µ –∑–∞–¥–∞–Ω—ã.
          </div>
          {% endif %}
        </div>
        <div class="card-footer bg-white card-action">
          <span class="text-muted small">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–ø—Å–∞</span>
          <a href="{% url 'update_raps' %}" class="btn btn-warning btn-sm text-white">–ò–∑–º–µ–Ω–∏—Ç—å</a>
        </div>
      </div>
    </div>
  </div>
</section>

{% if batch %}
<section class="container mt-5 mb-5">
  <div class="card shadow-sm border-success">
    <div class="card-header bg-success bg-opacity-75 text-white text-center fw-semibold">
      –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —Ç–µ–∫—É—â–µ–π –ø–∞—Ä—Ç–∏–∏
    </div>
    <div class="card-body">
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="card h-100 border-0">
            <div class="card-header bg-light fw-semibold text-center">
              –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
            </div>
            <div class="card-body p-0">
              <table class="table table-bordered mb-0">
                <tbody>
                  <tr>
                    <th scope="row" class="text-start">–ó–∞–∫—É–ø–æ—á–Ω–∞—è —Ü–µ–Ω–∞, —Ä—É–±/–∫–≥</th>
                    <td class="text-center">{{ batch.purchase_price }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ú–∞—Å—Å–∞ –ø–∞—Ä—Ç–∏–∏, —Ç</th>
                    <td class="text-center">{{ batch.weight_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ö—É–ª—å—Ç—É—Ä–∞ –ø–∞—Ä—Ç–∏–∏</th>
                    <td class="text-center">{{ batch.get_culture_display }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ù–∞—á–∞–ª–æ –ø—Ä–∏–µ–º–∫–∏</th>
                    <td class="text-center">{{ batch.receipt_start_date|default:"‚Äî" }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–û–∫–æ–Ω—á–∞–Ω–∏–µ –ø—Ä–∏–µ–º–∫–∏</th>
                    <td class="text-center">{{ batch.receipt_end_date|default:"‚Äî" }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–û—Ç—Å—Ä–æ—á–∫–∞, –¥–Ω–µ–π</th>
                    <td class="text-center">{{ batch.delay_days }}</td>
                  </tr>
                <tr>
                    <th scope="row" class="text-start"> –ö–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –¶–ë</th>
                    <td class="text-center">{{ batch.key_rate }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card h-100 border-0">
            <div class="card-header bg-light fw-semibold text-center">
              –£—Å–ª–æ–≤–∏—è –∑–∞–∫—É–ø–∫–∏
            </div>
            <div class="card-body p-0">
              <table class="table table-bordered mb-0">
                <tbody>
                  <tr>
                    <th scope="row" class="text-start">–í–∏–¥ –∑–∞–∫—É–ø–∫–∏</th>
                    <td class="text-center">{{ batch.get_purchase_type_display }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¢–∏–ø –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞</th>
                    <td class="text-center">{{ batch.get_contract_type_display }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°–æ–≥–ª–∞—à–µ–Ω–∏–µ</th>
                    <td class="text-center">{{ batch.get_agreement_type_display }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¶–µ–ª–µ–≤–æ–π –∑–∞–≤–æ–¥</th>
                    <td class="text-center">{{ batch.get_target_factory_display }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¢–∏–ø –¢–°</th>
                    <td class="text-center">{{ batch.get_transport_type_display }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¢–∏–ø –ø–∞—Ä—Ç–Ω–µ—Ä–∞</th>
                    <td class="text-center">{{ batch.get_partner_type_display }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card h-100 border-0">
            <div class="card-header bg-light fw-semibold text-center">
              –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞, %
            </div>
            <div class="card-body p-0">
              <table class="table table-bordered mb-0">
                <tbody>
                  <tr>
                    <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–æ—Å—Ç—å</th>
                    <td class="text-center">{{ batch.oil_content_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°–æ—Ä–Ω–æ—Å—Ç—å</th>
                    <td class="text-center">{{ batch.weed_impurity_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ü—Ä–æ—Ç–µ–∏–Ω</th>
                    <td class="text-center">{{ batch.protein_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–∞—è –ø—Ä–∏–º–µ—Å—å</th>
                    <td class="text-center">{{ batch.oil_impurity_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ö–ß–ú</th>
                    <td class="text-center">{{ batch.KCHM_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–í–ª–∞–∂–Ω–æ—Å—Ç—å</th>
                    <td class="text-center">{{ batch.moisture_actual }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer bg-white text-center">
      <a href="{% url 'update_by_party' %}" class="btn btn-success px-4">–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</a>
    </div>
  </div>
</section>
{% endif %}
{% if tariffs %}
<section class="container mt-5 mb-5">
  <div class="card shadow-sm border-secondary">
    <div class="card-header bg-secondary bg-opacity-75 text-white text-center fw-semibold">
      –¢–∞—Ä–∏—Ñ—ã
    </div>
    <div class="card-body">
      <div class="row g-4 justify-content-center">
        <div class="col-lg-8">
          <div class="card h-100 border-0">
            <div class="card-body p-0">
              <table class="table table-bordered mb-0">
                <thead class="table-light">
                  <tr>
                    <th class="text-start">–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å</th>
                    <th class="text-center">–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <th scope="row" class="text-start">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ, –∫–º</th>
                    <td class="text-center">{{ tariffs.distance }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è, –¥–Ω–µ–π</th>
                    <td class="text-center">{{ tariffs.storage_days }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–µ–º–∫–∏, —Ä/—Ç–Ω</th>
                    <td class="text-center">{{ tariffs.acceptance_cost }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è, —Ä/—Ç–Ω/—Å—É—Ç</th>
                    <td class="text-center">{{ tariffs.storage_cost }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¢–∞—Ä–∏—Ñ, —Ä/—Ç–Ω/–∫–º</th>
                    <td class="text-center">{{ tariffs.tariff }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—Ç–≥—Ä—É–∑–∫–∏, —Ä/—Ç–Ω</th>
                    <td class="text-center">{{ tariffs.shipping_cost }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —É–±—ã–ª—å, %</th>
                    <td class="text-center">{{ tariffs.natural_loss_pct }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer bg-white text-center">
      <a href="{% url 'update_tariffs' %}" class="btn btn-secondary px-4">–ò–∑–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ—ã</a>
    </div>
  </div>
</section>
{% endif %}

<section class="container mt-5 mb-5">
  <div class="card shadow-sm border-secondary">
    <div class="card-header bg-warning bg-opacity-75 text-black text-center fw-semibold">
      –†–∞—Å—á–µ—Ç—ã
    </div>
    <div class="card-body">
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="card h-100 border-0">
            <div class="card-header bg-success bg-opacity-75 text-black fw-semibold text-center">
              –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –±–ª–æ–∫
            </div>
            <div class="card-body p-0">
              <table class="table table-bordered mb-0">
                <tbody>
                  <tr>
                    <th scope="row" class="text-start">–ü–ª–∞–Ω–æ–≤–∞—è –¥–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã</th>
                    <td class="text-center">{{ calculate.plane }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–µ–Ω–µ–≥</th>
                    <td class="text-center">{{ calculate.value_of_money }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏, —Ä—É–±/–∫–≥ –±–ù–î–°</th>
                    <td class="text-center">{{ calculate.purchase_price }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¶–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏ —Ä—É–±/–∫–≥ —Å–ù–î–°</th>
                    <td class="text-center">{{ calculate.purchase_price_NDS }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, —Ä—É–±</th>
                    <td class="text-center">123</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏—è/–ø—Ä–∏–µ–º–∫–∏, —Ä—É–±</th>
                    <td class="text-center">123</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card h-100 border-0">
            <div class="card-header bg-light fw-semibold text-center">
              –ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É
            </div>
            <div class="card-body p-0">
              <table class="table table-bordered mb-0">
                <tbody>
                  <tr>
                    <th scope="row" class="text-start">–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏</th>
                    <td class="text-center">123</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏</th>
                    <td class="text-center">123</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¶–µ–ª–µ–≤–æ–π –∑–∞–≤–æ–¥</th>
                    <td class="text-center">123</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–¢–∏–ø –¢–°</th>
                    <td class="text-center">{{ batch.get_transport_type_display }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="col-lg-4">
          <div class="card h-100 border-0">
            <div class="card-header orange-town fw-semibold text-center">
              –ö–∞—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ
            </div>
            <div class="card-body p-0">
              <table class="table table-bordered mb-0">
                <tbody>
                  <tr>
                    <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–æ—Å—Ç—å, %</th>
                    <td class="text-center">{{ batch.oil_content_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–°–æ—Ä–Ω–æ—Å—Ç—å, %</th>
                    <td class="text-center">{{ batch.weed_impurity_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ü—Ä–æ—Ç–µ–∏–Ω, %</th>
                    <td class="text-center">{{ batch.protein_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ú–∞—Å–ª–∏—á–Ω–∞—è –ø—Ä–∏–º–µ—Å—å, %</th>
                    <td class="text-center">{{ batch.oil_impurity_actual }}</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–ö–ß–ú, %</th>
                    <td class="text-center">123</td>
                  </tr>
                  <tr>
                    <th scope="row" class="text-start">–í–ª–∞–∂–Ω–æ—Å—Ç—å, %</th>
                    <td class="text-center">123</td>
                  </tr>
                <tr>
                    <th scope="row" class="text-start">–ò—Ç–æ–≥–æ, %</th>
                    <td class="text-center">123</td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer bg-white text-center">
      <a href="#" class="btn btn-success px-4">PASS</a>
    </div>
  </div>
</section>

{% endblock %}